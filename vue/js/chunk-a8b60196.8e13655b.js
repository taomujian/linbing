(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a8b60196"],{"10fd":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return isemail}),__webpack_require__.d(__webpack_exports__,"e",function(){return isusername}),__webpack_require__.d(__webpack_exports__,"d",function(){return istarget}),__webpack_require__.d(__webpack_exports__,"f",function(){return loginusername}),__webpack_require__.d(__webpack_exports__,"a",function(){return ischecknum}),__webpack_require__.d(__webpack_exports__,"c",function(){return ispassword});var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__),_libs_http__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("b1d0"),_libs_crypto__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("e0ac"),_libs_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("c276");function isemail(rule,value,callback){var reg=/^[a-z0-9](?:[-_.+]?[a-z0-9]+)*@.*?\.com$/;if(!reg.test(value.trim()))return callback(new Error("请输入合法邮箱"));var data={type:"email",data:value};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_2__["a"].Encrypt(data)};_libs_http__WEBPACK_IMPORTED_MODULE_1__["a"].post("/api/query",params).then(function(res){switch(res.data=eval("("+res.data+")"),res.data.code){case"Z1001":return callback(new Error("系统异常"));case"Z1002":return callback(new Error("请求方法异常"));case"Z1007":return callback(new Error("邮箱已注册"));default:callback()}})}function isusername(rule,value,callback){var reg=/^[A-Za-z0-9]{1,10}$/;if(!reg.test(value.trim()))return callback(new Error("用户名输入错误"));var data={type:"username",data:value};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_2__["a"].Encrypt(data)};_libs_http__WEBPACK_IMPORTED_MODULE_1__["a"].post("/api/query",params).then(function(res){switch(res.data=eval("("+res.data+")"),res.data.code){case"Z1001":return callback(new Error("系统异常"));case"Z1002":return callback(new Error("请求方法异常"));case"Z1006":return callback(new Error("用户名已注册"));default:callback()}})}function istarget(rule,value,callback){value=value.split(/[(\r\n)\r\n]+/);for(var i=0;i<value.length;i++){var data={type:"target",data:{data:value[i],token:Object(_libs_util__WEBPACK_IMPORTED_MODULE_3__["i"])()}};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_2__["a"].Encrypt(data)};_libs_http__WEBPACK_IMPORTED_MODULE_1__["a"].post("/api/query",params).then(function(res){switch(res.data=eval("("+res.data+")"),res.data.code){case"Z1001":return callback(new Error("系统异常"));case"Z1002":return callback(new Error("请求方法异常"));case"Z10010":return callback(new Error("目标已存在,请不要重复添加目标,如已删除请在垃圾箱内恢复"));default:callback()}})}}function loginusername(e,r,a){var _=/^[A-Za-z0-9]{1,10}$/;if(!_.test(r.trim()))return a(new Error("用户名输入错误"));a()}function ischecknum(e,r,a){var _=/^[A-Za-z0-9]{6}$/;if(!_.test(r.trim()))return a(new Error("注册码输入错误"));a()}function ispassword(e,r,a){var _=/^[A-Za-z0-9]{8,16}$/;if(!_.test(r.trim()))return a(new Error("密码输入错误"));a()}},"33e3":function(e,r,a){"use strict";var _=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("Form",{ref:"LoginForm",attrs:{model:e.form,rules:e.rules},nativeOn:{keydown:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.handleSubmit(r)}}},[a("FormItem",{attrs:{prop:"username"}},[a("Input",{attrs:{placeholder:"请输入用户名,1-10位字母数字",clearable:""},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[a("Icon",{attrs:{size:16,type:"ios-person"}})],1)])],1),a("FormItem",{attrs:{prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"请输入密码,8-16位字母数字",clearable:""},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[a("Icon",{attrs:{size:14,type:"md-lock"}})],1)])],1),a("FormItem",[a("Button",{attrs:{type:"primary",long:""},on:{click:e.handleSubmit}},[e._v("登录")])],1),a("FormItem",[a("Button",{attrs:{type:"primary",long:""},on:{click:e.Toregister}},[e._v("没有账号?马上注册")])],1),a("FormItem",[a("Button",{attrs:{type:"primary",long:""},on:{click:e.Tofindpassword}},[e._v("忘记密码?马上找回")])],1)],1)},t=[],s=a("10fd"),o=(a("e0ac"),{name:"LoginForm",props:{userNameRules:{type:Array,default:function(){return[{required:!0,trigger:"blur",validator:s["f"]}]}},passwordRules:{type:Array,default:function(){return[{required:!0,trigger:"blur",validator:s["c"]}]}}},data:function(){return{form:{username:"",password:""}}},computed:{rules:function(){return{username:this.userNameRules,password:this.passwordRules}}},methods:{handleSubmit:function(){var e=this;this.$refs.LoginForm.validate(function(r){r&&e.$emit("on-success-valid",{username:e.form.username,password:e.form.password})})},Toregister:function(){var e=this;setTimeout(function(){e.$router.push({path:"/register"})},1e3)},Tofindpassword:function(){var e=this;setTimeout(function(){e.$router.push({path:"/findpassword"})},1e3)}}}),i=o,n=a("2877"),c=Object(n["a"])(i,_,t,!1,null,null,null),u=c.exports;r["a"]=u},"4b4f":function(e,r,a){"use strict";var _=a("8df5"),t=a.n(_);t.a},8927:function(module,__webpack_exports__,__webpack_require__){"use strict";var _libs_http__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b1d0"),_c_login_form__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("33e3"),_libs_crypto__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("e0ac"),_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("4360");__webpack_exports__["a"]={components:{LoginForm:_c_login_form__WEBPACK_IMPORTED_MODULE_1__["a"]},methods:{handleSubmit:function handleSubmit(_ref){var _this=this,username=_ref.username,password=_ref.password,data={username:username.trim(),password:password.trim()};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_2__["a"].Encrypt(data)};_libs_http__WEBPACK_IMPORTED_MODULE_0__["a"].post("/api/login",params).then(function(res){switch(res.data=eval("("+res.data+")"),res.data.code){case"Z1000":_store__WEBPACK_IMPORTED_MODULE_3__["a"].commit("setToken",res.data.data.token);var _data={token:res.data.data.token.trim()};_data=JSON.stringify(_data);var _params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_2__["a"].Encrypt(_data)};_libs_http__WEBPACK_IMPORTED_MODULE_0__["a"].post("/api/getuserinfo",_params).then(function(res){switch(res.data=eval("("+res.data+")"),res.data.code){case"Z1000":_this.$Notice.success({title:"登录成功",desc:"马上跳转到主页 "}),_store__WEBPACK_IMPORTED_MODULE_3__["a"].commit("setUserName",res.data.data.username),_store__WEBPACK_IMPORTED_MODULE_3__["a"].commit("setUserEmail",res.data.data.email),_store__WEBPACK_IMPORTED_MODULE_3__["a"].commit("setAvatar","/api/images/"+res.data.data.avatar),_store__WEBPACK_IMPORTED_MODULE_3__["a"].commit("setAccess",res.data.data.access),_store__WEBPACK_IMPORTED_MODULE_3__["a"].commit("setUserId",res.data.data.user_id),_store__WEBPACK_IMPORTED_MODULE_3__["a"].commit("setHasGetInfo",!0),setTimeout(function(){_this.$router.push({path:"/home"})},1e3);break;case"Z1001":_this.$Notice.error({title:"登录失败",desc:"系统发生异常,请稍后再次尝试"});break;case"Z1002":_this.$Notice.error({title:"登录失败",desc:"系统发生异常,请稍后再次尝试"});break;case"Z1004":_this.$Notice.error({title:"登录失败",desc:"登录失败,原因是认证失败,请重新登录"});break}});break;case"Z1001":_this.$Notice.error({title:"登录失败",desc:"系统发生异常,请稍后再次尝试"});break;case"Z1002":_this.$Notice.error({title:"登录失败",desc:"系统发生异常,请稍后再次尝试"});break;case"Z1005":_this.$Notice.error({title:"用户未注册",desc:"请前往注册页面注册"});break;case"Z1008":_this.$Notice.error({title:"密码错误",desc:"密码错误,如果忘记密码请找回密码"});default:break}})}}}},"8df5":function(e,r,a){},e49c:function(e,r,a){"use strict";a.r(r);var _=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"login"},[a("div",{staticClass:"login-con"},[a("Card",{attrs:{icon:"log-in",title:"欢迎登录",bordered:!1}},[a("div",{staticClass:"form-con"},[a("login-form",{on:{"on-success-valid":e.handleSubmit}})],1)])],1)])},t=[],s=a("8927"),o=s["a"],i=(a("4b4f"),a("2877")),n=Object(i["a"])(o,_,t,!1,null,null,null);r["default"]=n.exports}}]);